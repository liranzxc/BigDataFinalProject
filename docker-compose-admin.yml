version: '3.7'
services:
  producer:
    container_name: producer
    build:
      dockerfile: ./Dockerfile
      context: .
    command: python producer_main.py
    environment:
      UPLOAD_TOPIC: "test25"
      KAFKA_HOST: "kafka"
      BATCH_SIZE : 5
    networks:
      - app-tier

  consumer:
    container_name: consumer
    build:
      dockerfile: ./Dockerfile
      context: .
    command: python3 consumer_main.py
    environment:
      UPLOAD_TOPIC: "test25"
      KAFKA_HOST: "kafka"
      SPARK_LOCAL: "spark://spark-master:7077"
      MONGODB_HOST : "mongodb"
      BATCH_SIZE : 5
    networks:
      - app-tier



networks:
  app-tier:
    driver: bridge
